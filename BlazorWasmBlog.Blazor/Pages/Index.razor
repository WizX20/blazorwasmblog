@page "/"

@using BlazorWasmBlog.Modules.SquidexCms.Services
@using BlazorWasmBlog.Modules.SquidexCms.Configuration

@inject ISquidexCmsSettingsService CmsSettingsService

<h1>Hello, world!</h1>

Welcome to your new app.

<SurveyPrompt Title="How is Blazor working for you?" />

@if (string.IsNullOrEmpty(SquidexAppNameSetting))
{
   <span>Loading squidex settings...</span>
}
else
{
    <h3>Squidex Application</h3>
    <span>@SquidexAppNameSetting</span>
}

@code {
    string SquidexAppNameSetting = string.Empty;

    protected override async Task OnInitializedAsync()
    {
        var squidexCmsSettings = CmsSettingsService.GetSquidexCmsSettings();
        SquidexAppNameSetting = $"{nameof(SquidexCmsSettings.AppName)}: {squidexCmsSettings.AppName}";

        await base.OnInitializedAsync();
    }
}